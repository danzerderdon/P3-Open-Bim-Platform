<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    {% load static %}
    <title>{% block title %}Open BIM-Education Plattform{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <style>

    /* Navigation */
    nav {

        position: fixed; /* neu: fixiert die Leiste */
    top: 0; /* neu: oben am Bildschirm */
    left: 0;
    right: 0;
    z-index: 1000; /* stellt sicher, dass sie √ºber anderen Elementen bleibt */

        display: flex;
        justify-content: space-between;
        align-items: stretch;
        background-color: #d6d4d4;
        height: 50px;
        font-family: sans-serif;
        padding: 5px;


    }

.nav-fade {
    position: fixed;
    top: 50px; /* exakt unter der Leiste */
    left: 0;
    right: 0;
    height: 80px;
    pointer-events: none;
    z-index: 999; /* unterhalb der Navbar (1000) */

    background: linear-gradient(to bottom, rgba(255,255,255,0.8), rgba(255,255,255,0));
}


    nav img {
        height: 100%;
        padding: 0 20px;

    }

    nav .nav-buttons {
        display: flex;
        height: 100%;
    }

    nav form {
        display: flex; /* Macht das Formular genauso gro√ü wie der Button */
        align-items: stretch;
        margin: 0;
        height: 100%;
    }

    nav form:not(:last-child)::after {
        content: "";
        display: block;
        width: 2px;
        background-color: #999;
        height: 100%;
    }

    nav form button {
        all: unset; /* Reset f√ºr alle Browser-Styles */
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 25px;
        height: 100%;
        background-color: #d6d4d4;
        color: #333;
        font-weight: bold;
        font-size: 15px;
        cursor: pointer;
        transition: background-color 0.2s ease, color 0.2s ease;
    }

    nav form button:hover {
        background-color: #2b9bc4;
        color: white;
    }

    nav form button.active {
        background-color: #3399ff;
        color: white;
    }

    nav form button:focus {
        outline: none;
    }


    main {
    padding-top: calc(50px + 30px);
}

</style>
</head>
<body>


<!-- üîç Navigation -->
<nav>
    <img src="{% static 'images/logo.png' %}" alt="Logo">

    <div class="nav-buttons">
        <form action="{% url 'home' %}" method="get">
            <button type="submit" class="{% if active_page == 'home' %}active{% endif %}">Home</button>
        </form>

        <form action="{% url 'tutorials' %}" method="get">
            <button type="submit" class="{% if active_page == 'tutorials' %}active{% endif %}">Tutorials</button>
        </form>


        {% if user.is_authenticated and user.groups.first.name == "BIM Expert" %}
        <form action="{% url 'create' %}" method="get">
            <button type="submit" class="{% if active_page == 'create' %}active{% endif %}">Create</button>
        </form>
        {% endif %}

        <form action="{% url 'community' %}" method="get">
            <button type="submit" class="{% if active_page == 'community' %}active{% endif %}">Community</button>
        </form>

        {% if user.is_authenticated %}
        <form action="{% url 'dashboard' %}" method="get">
            <button type="submit" class="{% if active_page == 'dashboard' %}active{% endif %}">Dashboard</button>
        </form>
        {% endif %}

        {% if user.is_authenticated %}
<form action="{% url 'logout' %}?next={{ request.path }}" method="post">
    {% csrf_token %}
    <button type="submit">Logout</button>
</form>
{% else %}
<form action="{% url 'login' %}" method="get">
    <button type="submit" class="{% if active_page == 'login' %}active{% endif %}">Login</button>
</form>
{% endif %}

    </div>
</nav>
<div class="nav-fade"></div>

<!-- üìÑ Inhalt -->
<main>
    {% block content %}{% endblock %}
</main>



<div class="user-panel" style="text-align: left">
  <div class="user-header" onclick="toggleUserMenu()">
    <img src="{% static 'images/user_icon.png' %}" alt="User Icon">
    {% if user.is_authenticated %}
      <span>Willkommen zur√ºck,<span class="notranslate"> {{ user.username }}</span>!</span>
    {% else %}
      <span>Sie sind nicht eingeloggt</span>
    {% endif %}
  </div>
  <div class="user-menu" id="userMenu">
  {% if user.is_authenticated %}

      <p>Sie sind eingeloggt als - {{ request.user.username }}</p>

      {% if user.groups.all %}
            <p>Ihre Rolle ist - {{ user.groups.first.name }}</p>
        {% else %}
            <p>Du hast noch keine Rolle zugewiesen.</p>
        {% endif %}<br><hr><br>


    <a href="{% url 'passchange' %}">üîí Passwort √§ndern</a>
    <a href="{% url 'change_role' %}">üßë‚Äçüéì Rolle √§ndern</a>
    <a href="{% url 'logout' %}">üö™ Logout</a>
  {% else %}

      <p>Sie haben noch keinen Account.</p>
      <p>Erstellen sie einen neuen Account oder loggen sie sich ein.</p><br><hr><br>

    <a href="{% url 'login' %}">üîê Login</a>
    <a href="{% url 'register' %}">üìù Registrieren</a>
  {% endif %}
</div>

</div>








 <!-- Skript f√ºr Sidebar-Animation -->

<script>
  function toggleUserMenu() {
  const menu = document.getElementById("userMenu");

  if (menu.classList.contains("open")) {
    // ZUKLAPPEN
    menu.style.maxHeight = menu.scrollHeight + "px"; // Startwert
    requestAnimationFrame(() => {
      menu.style.maxHeight = "0px";
      menu.classList.remove("open");
    });
  } else {
    // AUFKLAPPEN
    menu.classList.add("opening");
    menu.style.maxHeight = menu.scrollHeight + "px";

    menu.addEventListener('transitionend', function handler() {
      menu.classList.remove("opening");
      menu.classList.add("open");
      menu.style.maxHeight = "none"; // Begrenzung entfernen
      menu.removeEventListener('transitionend', handler);
    });
  }
}

</script>






<div id="google_translate_element" style="position: fixed; bottom: 5px; right: 5px; z-index: 3;"></div>

<!-- CSS f√ºr nicht zu √ºbersetzende Bereiche -->
<style>
.goog-te-banner-frame.skiptranslate {
        display: none !important;
    }

    body {
        top: 0px !important;
    }

    .goog-te-gadget-simple {
        background-color: #156082 !important;  /* Neue Hintergrundfarbe */
        color: #ffffff !important;  /* Wei√üer Text */
        border-radius: 5px;
        padding: 5px 10px;
        cursor: pointer;
        font-weight: bold;
        text-align: center;
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 9999;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }

    .goog-te-gadget-simple:hover {
        background-color: #2b9bc4 !important;  /* Dunklere Version f√ºr Hover */
    }

    .goog-te-gadget-icon {
        display: none !important;  /* Google Icon ausblenden */
    }


    .goog-te-gadget-simple .goog-te-menu-value {
        color: #ffffff !important;  /* Textfarbe */
    }

    .goog-te-gadget-simple .goog-te-menu-value span {
        color: #ffffff !important;  /* Textfarbe */
    }

    .goog-te-gadget-icon {
        display: none !important;  /* Google Icon ausblenden */
    }

    /* Google Translate Leiste verkleinern */
    .goog-te-banner-frame.skiptranslate {
        height: 200px !important; /* H√∂he anpassen */
        overflow: hidden !important;
    }

    .goog-te-banner-frame.skiptranslate .goog-te-banner-content {
        font-size: 10px !important; /* Schriftgr√∂√üe anpassen */
        padding: 2px !important;
    }

    .goog-te-banner-frame.skiptranslate .goog-te-banner-content .goog-te-button,
    .goog-te-banner-frame.skiptranslate .goog-te-banner-content .goog-te-menu-value {
        padding: 2px 5px !important;
        font-size: 10px !important;
    }

    body {
        top: 0px !important;
    }


</style>

<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'auto',  // Automatische Spracherkennung
            includedLanguages: 'en,de,fr,es,it,pt,nl,ru,zh-CN,ja,ko,ar,hi,tr,pl',
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        }, 'google_translate_element');
    }

    // Elemente mit der Klasse 'notranslate' werden vom √úbersetzen ausgeschlossen
    document.addEventListener('DOMContentLoaded', function() {
        const elements = document.querySelectorAll('.notranslate');
        elements.forEach(element => {
            element.setAttribute('translate', 'no');
        });
    });
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>


{% load static %}
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Deine Seite</title>
  <style>
    /* 1) Container f√ºr das Flugzeug, 30% von oben, hinter den Karten */
    #plane-container {
      position: fixed;
      top: 30vh;        /* 30% der Viewport-H√∂he */
      left: 0;
      width: 100%;
      height: 0;        /* H√∂he selbst √ºber das img geregelt */
      pointer-events: none;
      overflow: visible;
      z-index: -10;       /* kleiner als die Karten (siehe weiter unten) */
    }

    /* 2) Flugzeug-Icon initial ganz links au√üerhalb */
    #plane {
      position: absolute;
      left: -150px;     /* Start au√üerhalb */
      transform: rotate(5deg);
      width: 150px;
      will-change: left;
    }

    /* 3) Keyframes f√ºr die Flug-Animation */
    @keyframes fly {
      from { left: -150px; }
      to   { left: 100%; }
    }
    .fly {
      animation: fly 8s linear forwards;
    }

    .fly {
  animation: fly 8s linear forwards;
  animation-delay: 15s;    /* 5 Sekunden Pause, bevor‚Äôs losgeht */
}

    /* 4) Alle Karten vor das Flugzeug holen */
    .tutorial-card,
    .card-container {
      position: relative; /* n√∂tig, damit z-index greift */
              /* h√∂her als das Flugzeug */
    }

#crane-container img {
  /* Variante A: √ºber Grayscale‚ÜíSepia‚ÜíHue-Shift */
  filter:
    grayscale(100%)    /* 1) alle Originalfarben heraus */
    sepia(100%)        /* 2) warme Basis legen */
    hue-rotate(160deg) /* 3) Farbton in Richtung Haus-T√ºrkis schieben */
    saturate(100%)     /* 4) S√§ttigung reduzieren */
    brightness(2.1)    /* 5) etwas aufhellen */
    contrast(0.9);     /* 6) Kontrast leicht senken */
}




      /* 1) Kran-Container: fixe Position unten rechts, hinter den Karten */
    #crane-container {
      position: fixed;
      bottom: 50px;     / Abstand vom unteren Viewport-Rand */
      right: 10%;       /* Abstand vom rechten Viewport-Rand */
      width: 200px;     /* passt du nach Belieben an */
      height: auto;
      pointer-events: none;
      z-index: -10;       /* hinter deinen .tutorial-card / .card-container (z-index:2) */
    }

    /* 2) Sicherstellen, dass deine Karten dr√ºber liegen */
    .tutorial-card,
    .card-container {
      position: relative;
      z-index: 2;
    }
  </style>
</head>
<body>
  <!-- ‚Ä¶ hier kommt dein restlicher Seiteninhalt ‚Ä¶ -->

  <!-- Das Flugzeug-Element -->
  <div id="plane-container">
    <img id="plane" src="{% static 'images/plane.png' %}" alt="Flugzeug">
  </div>
<div id="crane-container">
    <img src="{% static 'images/kran.gif' %}" alt="Animierter Kran">
  </div>
  <!-- JS zum Starten der Animation -->
  <script>
    (function() {
      const plane = document.getElementById('plane');

      function startFly() {
        plane.classList.remove('fly');
        // Reflow forcieren, damit die Animation zur√ºckgesetzt wird
        void plane.offsetWidth;
        plane.classList.add('fly');
      }

      // beim Laden einmal starten
      startFly();
      // alle 60 000 ms (1 Minute) wiederholen
      setInterval(startFly, 60000);
    })();
  </script>
</body>
</html>




{% block extra_js %}{% endblock %}
</body>
</html>

