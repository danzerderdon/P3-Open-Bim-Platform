{% extends 'base.html' %}

{% block content %}
  <style>
    .tutorial-wrapper {
      width: 57%;
      margin-top: 2rem;
      margin-bottom: 2rem;
      margin-left: 22%;
    }

    .tutorial-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
    }

    .tutorial-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 1.5rem;
      text-align: center;
      transition: transform 0.2s ease;
      border: 3px solid #ddd; /* fallback, wird überschrieben durch Schwierigkeit */
    }

    /* Farbige Ränder nach Schwierigkeit */
    .tutorial-card.leicht {
      border-color: #27ae60; /* grün */
    }

    .tutorial-card.mittel {
      border-color: #f1c40f; /* gelb */
    }

    .tutorial-card.schwer {
      border-color: #e74c3c; /* rot */
    }

    .tutorial-card.expert {
      border-color: #8e44ad; /* lila */
    }



/* Hover mit kräftigem Glow */
.tutorial-card:hover {
  transform: translateY(-12px) scale(1.02);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.tutorial-card.leicht:hover {
  box-shadow: 0 0 25px rgba(39, 174, 96, 0.7);
}

.tutorial-card.mittel:hover {
  box-shadow: 0 0 25px rgba(241, 196, 15, 0.9);
}

.tutorial-card.schwer:hover {
  box-shadow: 0 0 25px rgba(230, 126, 34, 0.85);
}

.tutorial-card.expert:hover {
  box-shadow: 0 0 25px rgba(231, 76, 60, 0.85);
}



    .tutorial-card img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .tutorial-card h2 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
    }

    .tutorial-card p {
      margin-bottom: 0.5rem;
    }

    .tutorial-card a {
      display: inline-block;
      margin-top: 0.5rem;
      color: #0066cc;
      text-decoration: none;
      font-weight: bold;
    }

    .tutorial-card a:hover {
      text-decoration: underline;
    }

    h1 {
      text-align: center;
      margin-top: 2rem;
    }

    .pagination {
      text-align: center;
      margin-top: 2rem;
    }

    .pagination a {
      margin: 0 10px;
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }

    @media (max-width: 1100px) {
      .tutorial-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 700px) {
      .tutorial-wrapper {
        width: 90%;
        margin-left: auto;
        margin-right: auto;
      }

      .tutorial-grid {
        grid-template-columns: 1fr;
      }
    }

    .detail-panel {
  position: fixed;
  top: 5%;
  right: 0;
  width: 20%;
  height: 90%;
  background-color: #fdfdfd;
  border-left: 2px solid #ccc;
  box-shadow: -4px 0 10px rgba(0, 0, 0, 0.1);
  overflow-y: auto;
  padding: 1rem;
  z-index: 999;
}

.detail-content img {
  max-width: 100%;
  border-radius: 8px;
  margin: 10px 0;
}

.detail-content h2 {
  margin-top: 0;
  font-size: 1.3rem;
  color: #156082;
}

.detail-content p {
  margin: 0.5rem 0;
  font-size: 0.95rem;
}

.keyword-badge {
  display: inline-block;
  background: #e0e0e0;
  color: #333;
  padding: 4px 8px;
  border-radius: 8px;
  font-size: 0.8rem;
  margin: 3px;
}

.tutorial-card {
  cursor: pointer;
}

.detail-panel {

  position: fixed;
  top: 5%;
  right: 0;
  width: 17%;
  height: 90%;
  background-color: #fdfdfd;
  border-left: 2px solid #ccc;
  box-shadow: -4px 0 10px rgba(0, 0, 0, 0.1);
  overflow-y: auto;
  padding: 1rem;
  z-index: 999;
}

.tutorial-card.active {
  transform: translateY(-12px) scale(1.02);
}

.tutorial-card.active.leicht {
  box-shadow: 0 0 25px rgba(39, 174, 96, 0.7);
}

.tutorial-card.active.mittel {
  box-shadow: 0 0 25px rgba(241, 196, 15, 0.9);
}

.tutorial-card.active.schwer {
  box-shadow: 0 0 25px rgba(230, 126, 34, 0.85);
}

.tutorial-card.active.expert {
  box-shadow: 0 0 25px rgba(231, 76, 60, 0.85);
}



.detail-panel {
  position: fixed;
  top: 20vh;
  right: -40%;
  width: 34%;
  height: 80vh;
  background-color: #fdfdfd;
  border-left: 2px solid #ccc;
  box-shadow: -4px 0 10px rgba(0, 0, 0, 0.1);
  z-index: 999;
  transition: right 0.4s ease;
  border-top-left-radius: 12px;
  border-bottom-left-radius: 12px;
  display: flex;
  flex-direction: column;
  overflow: visible; /* <<< ganz wichtig! */
}

.detail-panel.visible {
  right: 0;
}

.detail-panel-header {
  position: absolute;
  top: -1.2rem;
  left: -2px; /* sitzt etwas über dem Rand */
  width: calc(100% + 4px); /* macht’s breiter, um seitlich zu überlappen */
  background-color: #13647D;
  color: white;
  text-align: center;
  font-weight: bold;
  padding: 0.6rem 1rem;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  z-index: 1001;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}




.detail-content {
  overflow-y: auto;
  padding: 1rem;
  flex-grow: 1;
}

    .tutorial-card img {
  width: 100%;        /* feste Breite */
  height: auto;        /* Höhe passt sich an */
  border-radius: 8px;
  margin-bottom: 1rem;
  object-fit: contain; /* optional für sauberes Skalieren */
}

.tutorial-card {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 70%; /* oder beliebig passend */
  padding: 1.5rem;
  text-align: center;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  border: 3px solid #ddd;
  background: white;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

  </style>

  <h1>Alle Tutorials</h1>

  {% if tutorials %}
    <div class="tutorial-wrapper">
      <div class="tutorial-grid">
        {% for tutorial in tutorials %}



<div class="tutorial-card {{ tutorial.difficulty|default:'mittel' }}"
     data-title="{{ tutorial.title }}"
     data-description="{{ tutorial.description }}"
     data-program="{{ tutorial.program }}"
     data-program-versions="{{ tutorial.program_versions }}"
     data-keywords="{{ tutorial.keywords }}"
     data-difficulty="{{ tutorial.get_difficulty_display }}"
     data-series="{{ tutorial.series|default:'-' }}"
     data-createdby="{{ tutorial.created_by.username }}"
     data-createdat="{{ tutorial.created_at|date:'d.m.Y H:i' }}"
     data-thumbnail="{% if tutorial.thumbnail %}{{ tutorial.thumbnail.url }}{% endif %}"
     data-screenshot="{% if tutorial.screenshot %}{{ tutorial.screenshot.url }}{% endif %}"
>
  {% if tutorial.thumbnail %}
    <img src="{{ tutorial.thumbnail.url }}" alt="{{ tutorial.title }} Thumbnail">
  {% endif %}
  <h2>{{ tutorial.title }}</h2>
  <p><strong>Programm:</strong> {{ tutorial.program }}</p>
  <p><strong>Serie:</strong> {{ tutorial.series }}</p>


</div>





        {% endfor %}
      </div>

      {% if is_paginated %}
        <div class="pagination">
          {% if page_obj.has_previous %}
            <a href="?page=1">« Erste</a>
            <a href="?page={{ page_obj.previous_page_number }}">‹ Zurück</a>
          {% endif %}

          <span>Seite {{ page_obj.number }} von {{ page_obj.paginator.num_pages }}</span>

          {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Weiter ›</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">Letzte »</a>
          {% endif %}
        </div>
      {% endif %}
    </div>
  {% else %}
    <p style="text-align: center;">Aktuell gibt es keine Tutorials.</p>
  {% endif %}



<!-- Rechte Detailleiste -->
<div id="tutorial-details" class="detail-panel">
    <div class="detail-panel-header">Details zu diesem Tutorial</div>

  <div class="detail-content" id="detail-content">
    <p style="text-align: center; font-style: italic; color: #999;">Tutorialdetails hier anzeigen…</p>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const cards = document.querySelectorAll('.tutorial-card');
    const panel = document.getElementById('tutorial-details');
    const detailContent = document.getElementById('detail-content');
    let selectedCard = null;

    cards.forEach(card => {
      card.addEventListener('click', () => {
        const isActive = card.classList.contains('active');

        // Wenn schon aktiv → wieder ausblenden
        if (isActive) {
          card.classList.remove('active');
          panel.classList.remove('visible');
          selectedCard = null;
          return;
        }

        // Vorherige Karte deaktivieren
        if (selectedCard) {
          selectedCard.classList.remove('active');
        }

        // Aktuelle Karte aktivieren
        card.classList.add('active');
        selectedCard = card;

        const {
          title = '-',
          description = '-',
          program = '-',
          programVersions = '',
          difficulty = '-',
          keywords = '',
          series = '-',
          createdby = '-',
          createdat = '-',
          thumbnail = '',
          screenshot = ''
        } = card.dataset;

        const keywordBadges = keywords.split(',').map(word => `
          <span class="keyword-badge">${word.trim()}</span>
        `).join('');

        const content = `
          <h2>${title}</h2>
          <p><strong>Serie:</strong> ${series}</p>
          <p><strong>Erstellt von:</strong> ${createdby} am ${createdat}</p>
          <p><strong>Programm:</strong> ${program} ${programVersions ? `(${programVersions})` : ''}</p>
          <p><strong>Schwierigkeit:</strong> ${difficulty}</p>
          <p><strong>Beschreibung:</strong><br>${description.replace(/\n/g, "<br>")}</p>
          ${thumbnail ? `<p><strong>Thumbnail:</strong></p><img src="${thumbnail}" alt="Thumbnail">` : ''}
          ${screenshot ? `<p><strong>Screenshot:</strong></p><img src="${screenshot}" alt="Screenshot">` : ''}
          <p><strong>Schlagwörter:</strong></p>
          <div>${keywordBadges}</div>
        `;

        detailContent.innerHTML = content;
        panel.classList.add('visible');
      });
    });
  });
</script>



{% endblock %}
