{% extends 'base.html' %}
{% block title %}Tutorial erstellen{% endblock %}

{% block content %}
<!-- Quill Editor CSS -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<div class="section-container">
<h1 style="color: #156082;text-align: center;">Neues Tutorial erstellen</h1>

<div class="card-container">
<form method="post" enctype="multipart/form-data" style="max-width: 600px; margin: auto;">
    {% csrf_token %}

    <div style="margin-bottom: 20px;">
        <label><strong>Titel:</strong></label><br>
        {{ form.title }}
    </div>

    <div style="margin-bottom: 20px;">
        <label><strong>Beschreibung:</strong></label><br>
        {{ form.description }}
    </div>

    <div style="margin-bottom: 20px;">
        <label><strong>Schwierigkeitsgrad:</strong></label><br>
        {{ form.difficulty }}
    </div>

    <div style="margin-bottom: 20px;">
        <label><strong>Programm:</strong></label><br>
        {{ form.program }}
    </div>

    <div style="margin-bottom: 20px;">
  <label for="{{ form.program_versions.id_for_label }}"><strong>Programmversion(en):</strong></label><br>
  {{ form.program_versions }}
  <small style="color: #555;">z. B. 2021, 2022, 2023</small>
</div>


    <div style="margin-bottom: 20px;">
        <label><strong>Keywords:</strong></label><br>
        {{ form.keywords }}
        <small>Kommagetrennt, z.B. IFC, Modellierung, BIM</small>
    </div>

    <div style="margin-bottom: 20px;">
        <label><strong>Vorschaubild:</strong></label><br>
        {{ form.thumbnail }}
    </div>

    <div style="margin-bottom: 20px;">
        <label><strong>Screenshot (Prozessdiagramm):</strong></label><br>
        {{ form.screenshot }}
    </div>

    <div style="margin-bottom: 20px;">
        <label><strong>Dateien anhängen:</strong></label><br>
        <small>z.B. PDFs, Arbeitsmaterial, IFC-Dateien etc.</small><br>
        {{ form.attachments }}
    </div>

    <div style="margin-bottom: 30px;">
        <label><strong>Tutorial-Serie:</strong></label><br>
        <small>z.B. "Solibri Basics" (optional)</small><br>
        {{ form.series }}
    </div>

    <div style="text-align: center;">
        <button type="submit" class="button">Weiter zu den Schritten</button>
    </div>
</form>
</div>
</div>

<!-- Quill Editor JS -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const textarea = document.querySelector('textarea[name="description"]');
    if (textarea && !textarea.classList.contains('quill-initialized')) {
      const wrapper = document.createElement('div');
      wrapper.innerHTML = '<div class="quill-editor" style="height: 200px;"></div>';
      textarea.style.display = 'none';
      textarea.parentNode.insertBefore(wrapper, textarea);
      wrapper.appendChild(textarea);

      const quill = new Quill(wrapper.querySelector('.quill-editor'), {
        theme: 'snow',
        placeholder: 'Beschreibung eingeben...'
      });

      if (textarea.value) {
        quill.root.innerHTML = textarea.value;
      }

      textarea.form.addEventListener('submit', function () {
        textarea.value = quill.root.innerHTML;
      });

      textarea.classList.add('quill-initialized');
    }
  });
</script>

<style>
  .ql-editor {
    min-height: 150px;
    margin: 0 0 5px;
  }
</style>

{% endblock %}
